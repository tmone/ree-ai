# REE AI Platform - Backup Configuration Example
# Copy this file to .backup.env and update with your actual values

# ============================================================================
# BACKUP LOCATION
# ============================================================================
# Directory where backups will be stored
BACKUP_DIR=./backups

# ============================================================================
# POSTGRESQL CONFIGURATION
# ============================================================================
# PostgreSQL host (use container name if running in Docker)
POSTGRES_HOST=localhost
# POSTGRES_HOST=postgres  # If using Docker

# PostgreSQL port
POSTGRES_PORT=5432

# Database name to backup
POSTGRES_DB=ree_ai

# PostgreSQL user
POSTGRES_USER=ree_ai_user

# PostgreSQL password (REQUIRED)
POSTGRES_PASSWORD=your_postgres_password_here

# ============================================================================
# OPENSEARCH CONFIGURATION (Optional)
# ============================================================================
# Enable OpenSearch backup
OPENSEARCH_ENABLED=true

# OpenSearch host
OPENSEARCH_HOST=localhost
# OPENSEARCH_HOST=opensearch  # If using Docker

# OpenSearch port
OPENSEARCH_PORT=9200

# ============================================================================
# S3 BACKUP UPLOAD (Optional)
# ============================================================================
# Enable S3 upload
S3_ENABLED=false

# S3 bucket name
S3_BUCKET=my-company-backups

# AWS region
S3_REGION=us-east-1

# S3 path prefix for backups
S3_PREFIX=ree-ai-backups

# AWS credentials (use IAM role in production)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key

# ============================================================================
# BACKUP RETENTION
# ============================================================================
# Number of days to retain backups (0 = keep all)
RETENTION_DAYS=30

# ============================================================================
# EMAIL NOTIFICATIONS (Optional)
# ============================================================================
# Enable email notifications on failure
ENABLE_EMAIL=false

# Email recipient
EMAIL_RECIPIENT=ops@example.com

# SMTP server configuration
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=backup@example.com
SMTP_PASSWORD=your_smtp_password_here

# ============================================================================
# ADDITIONAL CONFIGURATION FILES TO BACKUP
# ============================================================================
# Space-separated list of additional files/directories to backup
# BACKUP_CONFIG_FILES=k8s monitoring .github

# ============================================================================
# LOGGING
# ============================================================================
# Log file location
LOG_FILE=./backup.log

# ============================================================================
# RESTORE CONFIGURATION
# ============================================================================
# Drop database before restore (use with caution!)
DROP_DB_BEFORE_RESTORE=false

# Verify backup checksums during restore
VERIFY_CHECKSUM=true

# Restore log file
# RESTORE_LOG_FILE=./restore.log

# ============================================================================
# DRY-RUN MODE
# ============================================================================
# Enable dry-run mode (preview operations without making changes)
DRY_RUN=false

# ============================================================================
# DOCKER SETUP EXAMPLE
# ============================================================================
# If running PostgreSQL in Docker, use:
# POSTGRES_HOST=ree-ai-postgres
#
# If running OpenSearch in Docker, use:
# OPENSEARCH_HOST=ree-ai-opensearch
#
# Run backup inside container:
# docker exec ree-ai-postgres pg_dump -U ree_ai_user ree_ai > backup.sql
#
# Or use docker-compose:
# docker-compose exec -T postgres pg_dump -U ree_ai_user ree_ai > backup.sql
